<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atender Chamados - Central de Servi√ßos</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="atender-chamados.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üéß Atender Chamados - Service Desk</h1>
                <p>Interface de atendimento para agentes</p>
                <a href="operacoes-ti.html" class="btn btn-secondary">‚Üê Voltar</a>
            </div>
        </div>

        <!-- Filtros e Busca -->
        <div class="filters-section">
            <div class="filters-group">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="my">Meus Tickets</button>
                <button class="filter-btn" data-filter="open">Em Andamento</button>
                <button class="filter-btn" data-filter="waiting">Aguardando</button>
                <button class="filter-btn" data-filter="resolved">Resolvidos</button>
            </div>
            <div class="search-group">
                <input type="text" id="searchTicket" placeholder="Buscar por n√∫mero (ex: HELP-123)">
                <button class="btn-search" onclick="searchTicket()">üîç Buscar</button>
            </div>
        </div>

        <!-- Estat√≠sticas -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-icon">üìã</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalTickets">-</div>
                    <div class="stat-label">Total de Tickets</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üîÑ</div>
                <div class="stat-info">
                    <div class="stat-number" id="openTickets">-</div>
                    <div class="stat-label">Em Andamento</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚è≥</div>
                <div class="stat-info">
                    <div class="stat-number" id="waitingTickets">-</div>
                    <div class="stat-label">Aguardando</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-info">
                    <div class="stat-number" id="resolvedTickets">-</div>
                    <div class="stat-label">Resolvidos (Hoje)</div>
                </div>
            </div>
        </div>

        <!-- Lista de Tickets -->
        <div class="tickets-section">
            <div class="section-header">
                <h2>Lista de Chamados</h2>
                <button class="btn-refresh" onclick="loadTickets()">üîÑ Atualizar</button>
            </div>

            <div id="loadingTickets" class="loading-state">
                <div class="loading-spinner"></div>
                <p>Carregando tickets...</p>
            </div>

            <div id="ticketsList" class="tickets-list"></div>
        </div>

        <!-- Modal de Detalhes do Ticket -->
        <div id="ticketModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTicketKey">HELP-XXX</h2>
                    <button class="close-modal" onclick="closeTicketModal()">&times;</button>
                </div>

                <div class="modal-body">
                    <!-- Informa√ß√µes Principais -->
                    <div class="ticket-info-section">
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Status:</label>
                                <span id="modalStatus" class="status-badge"></span>
                            </div>
                            <div class="info-item">
                                <label>Tipo:</label>
                                <span id="modalType"></span>
                            </div>
                            <div class="info-item">
                                <label>Prioridade:</label>
                                <span id="modalPriority"></span>
                            </div>
                            <div class="info-item">
                                <label>Solicitante:</label>
                                <span id="modalReporter"></span>
                            </div>
                            <div class="info-item">
                                <label>Respons√°vel:</label>
                                <span id="modalAssignee"></span>
                            </div>
                            <div class="info-item">
                                <label>Criado em:</label>
                                <span id="modalCreated"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Resumo e Descri√ß√£o -->
                    <div class="ticket-description-section">
                        <h3>Resumo</h3>
                        <p id="modalSummary"></p>

                        <h3>Descri√ß√£o</h3>
                        <div id="modalDescription"></div>
                    </div>

                    <!-- A√ß√µes R√°pidas -->
                    <div class="quick-actions">
                        <h3>A√ß√µes</h3>
                        <div class="actions-grid">
                            <select id="statusSelect" class="action-select">
                                <option value="">Alterar Status...</option>
                                <option value="Em Andamento">Em Andamento</option>
                                <option value="Aguardando pelo suporte">Aguardando pelo suporte</option>
                                <option value="Aguardando cliente">Aguardando cliente</option>
                                <option value="Escalado">Escalado</option>
                                <option value="Resolvido">Resolvido</option>
                                <option value="Fechado">Fechado</option>
                            </select>
                            <button class="btn-action" onclick="updateTicketStatus()">‚úì Alterar Status</button>

                            <input type="text" id="assigneeInput" class="action-input" placeholder="Atribuir para (email)">
                            <button class="btn-action" onclick="assignTicket()">üë§ Atribuir</button>
                        </div>
                    </div>

                    <!-- Adicionar Coment√°rio -->
                    <div class="comment-section">
                        <h3>Adicionar Coment√°rio</h3>
                        <textarea id="commentText" rows="4" placeholder="Digite seu coment√°rio..."></textarea>
                        <div class="comment-actions">
                            <label>
                                <input type="checkbox" id="internalComment">
                                Coment√°rio interno (n√£o vis√≠vel para o solicitante)
                            </label>
                            <button class="btn-primary" onclick="addComment()">üí¨ Adicionar Coment√°rio</button>
                        </div>
                    </div>

                    <!-- Hist√≥rico de Coment√°rios -->
                    <div class="comments-history">
                        <h3>Hist√≥rico</h3>
                        <div id="commentsList"></div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="atender-chamados.js"></script>
</body>
</html>
